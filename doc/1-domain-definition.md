# lyjoo Secure To Do List 도메인 정의서

---
**문서 버전**: 1.1.0
**최종 수정일**: 2025-11-25
**작성자**: 개발팀
**문서 상태**: 승인 대기

**변경 이력**:
- v1.1.0 (2025-11-25): 데이터 검증 규칙, 에러 코드 체계, 인수 테스트 시나리오, 요구사항 추적성 강화
- v1.0.0 (2025-11-25): 초안 작성
---

## 1. 프로젝트 개요

### 1.1 목적
개인별 할 일 목록을 안전하게 관리하고, 일정 만료 기간과 날씨 정보를 통해 효율적인 일정 관리를 지원하는 웹 애플리케이션

### 1.2 핵심 가치
- 사용자 인증 기반 개인화된 할 일 관리
- 만료 기한 중심의 체계적인 일정 관리
- 실시간 날씨 및 시간 정보 제공을 통한 맥락 인식
- 완료 보상을 통한 사용자 동기 부여
- 공식 일정(국경일)과 개인 일정의 통합 관리

## 2. 용어 사전

| 용어 | 정의 | 영문 | 비고 |
|-----|------|------|------|
| 사용자 | 시스템에 회원가입한 개인 | User | 고유한 userId로 식별 |
| 할 일 | 사용자가 관리하는 개별 작업 항목 | TodoItem | 완료/미완료 상태 관리 |
| 만료 기한 | 할 일을 완료해야 하는 날짜 | dueDate | YYYY-MM-DD 형식, 시간 미포함 |
| 완료 처리 | 할 일의 완료 상태를 true로 변경 | Complete | isCompleted 속성 업데이트 |
| 공휴일 | 국경일 등 공식 일정 | Holiday | 시스템에서 자동 관리 |
| 날씨 정보 | 실시간 기상 정보 | WeatherInfo | 외부 API를 통해 조회 |
| 세션 | 로그인 후 유지되는 사용자 인증 상태 | Session | 일정 시간 후 자동 만료 |
| 폭죽 효과 | 할 일 완료 시 표시되는 축하 애니메이션 | Firework Animation | 사용자 동기 부여 목적 |
| 아이디 | 사용자 로그인 계정 | username | 시스템 내 유일, 4~20자 |
| 비밀번호 | 사용자 인증 암호 | password | SHA-256 해시 저장 |
| 오늘 날짜 | 현재 시스템 날짜 | today | 할 일 조회 기준 |

## 3. 도메인 모델

### 3.1 핵심 엔티티

#### User (사용자)
**역할**: 시스템 접근 권한 및 할 일 소유자

| 속성 | 데이터 타입 | 제약 조건 | 기본값 | 설명 | 예시 |
|-----|-----------|---------|-------|------|------|
| userId | String (UUID) | PRIMARY KEY, NOT NULL | UUID.v4() | 사용자 고유 식별자 | "a1b2c3d4-e5f6-..." |
| username | String (20) | UNIQUE, NOT NULL, INDEX | - | 로그인 아이디 (4~20자, 영문소문자+숫자) | "hong123" |
| name | String (50) | NOT NULL | - | 사용자 실명 (2~20자, 한글/영문) | "홍길동" |
| phoneNumber | String (13) | UNIQUE, NOT NULL, INDEX | - | 핸드폰 번호 (010-XXXX-XXXX) | "010-1234-5678" |
| password | String (64) | NOT NULL | - | SHA-256 해시된 비밀번호 (64자 고정) | "5e884898da28..." |
| createdAt | DateTime | NOT NULL | CURRENT_TIMESTAMP | 회원가입 일시 (ISO 8601) | "2025-11-25T10:30:00Z" |
| lastLoginAt | DateTime | NULL | - | 마지막 로그인 일시 | "2025-11-25T14:20:00Z" |
| isActive | Boolean | NOT NULL | true | 계정 활성화 상태 | true |

**인덱스**:
- PRIMARY: userId
- UNIQUE: username, phoneNumber
- INDEX: username (로그인 조회 최적화)

**비즈니스 규칙**:
- username은 생성 후 변경 불가
- password는 평문 저장 금지, SHA-256 해시만 저장
- phoneNumber는 SMS 인증 시 활용 가능
- isActive=false 시 로그인 차단

---

#### TodoItem (할 일)
**역할**: 사용자가 관리하는 개별 작업 항목

| 속성 | 데이터 타입 | 제약 조건 | 기본값 | 설명 | 예시 |
|-----|-----------|---------|-------|------|------|
| todoId | String (UUID) | PRIMARY KEY, NOT NULL | UUID.v4() | 할 일 고유 식별자 | "f1e2d3c4-b5a6-..." |
| userId | String (UUID) | FOREIGN KEY (User), NOT NULL, INDEX | - | 할 일 소유자 (User.userId) | "a1b2c3d4-e5f6-..." |
| title | String (100) | NOT NULL | - | 할 일 제목 (1~100자) | "프로젝트 보고서 작성" |
| description | Text (1000) | NULL | "" | 할 일 상세 내용 (0~1000자) | "월간 진행 현황 정리" |
| dueDate | Date | NOT NULL, INDEX | - | 만료 기한 (YYYY-MM-DD, 오늘 이후) | "2025-11-30" |
| isCompleted | Boolean | NOT NULL | false | 완료 여부 | false |
| completedAt | DateTime | NULL | - | 완료 처리 일시 | "2025-11-26T09:15:00Z" |
| createdAt | DateTime | NOT NULL | CURRENT_TIMESTAMP | 생성 일시 | "2025-11-25T10:00:00Z" |
| updatedAt | DateTime | NOT NULL | CURRENT_TIMESTAMP | 최종 수정 일시 (자동 업데이트) | "2025-11-25T11:30:00Z" |

**인덱스**:
- PRIMARY: todoId
- FOREIGN KEY: userId → User.userId (ON DELETE CASCADE)
- INDEX: (userId, dueDate) - 사용자별 날짜 조회 최적화
- INDEX: (userId, isCompleted) - 완료/미완료 필터링 최적화

**비즈니스 규칙**:
- userId는 생성 후 변경 불가 (할 일 이전 불가)
- dueDate는 현재 날짜 이후만 허용
- isCompleted=true로 변경 시 completedAt 자동 설정
- updatedAt은 수정 시 자동 갱신 (DB 트리거 또는 애플리케이션 레벨)
- User 삭제 시 해당 사용자의 모든 TodoItem 자동 삭제 (CASCADE)

---

#### Holiday (공휴일)
**역할**: 국경일 및 공식 일정 정보

| 속성 | 데이터 타입 | 제약 조건 | 기본값 | 설명 | 예시 |
|-----|-----------|---------|-------|------|------|
| holidayId | String (UUID) | PRIMARY KEY, NOT NULL | UUID.v4() | 공휴일 고유 식별자 | "d1c2b3a4-e5f6-..." |
| name | String (50) | NOT NULL | - | 공휴일 명칭 | "설날" |
| date | Date | NOT NULL, INDEX | - | 공휴일 날짜 (YYYY-MM-DD) | "2025-01-29" |
| type | String (20) | NOT NULL | - | 공휴일 유형 (NATIONAL, SOLAR, LUNAR) | "LUNAR" |
| isRecurring | Boolean | NOT NULL | false | 반복 여부 (매년 반복) | true |
| description | String (200) | NULL | - | 공휴일 설명 | "음력 1월 1일" |

**인덱스**:
- PRIMARY: holidayId
- INDEX: date (날짜별 조회 최적화)
- INDEX: (date, type) - 복합 인덱스

**공휴일 유형 (type)**:
- `NATIONAL`: 국경일 (광복절, 개천절 등)
- `SOLAR`: 양력 공휴일 (신정, 어린이날 등)
- `LUNAR`: 음력 공휴일 (설날, 추석 등)

**비즈니스 규칙**:
- 공휴일 데이터는 관리자만 생성/수정/삭제 가능
- 일반 사용자는 조회만 가능
- isRecurring=true인 경우 매년 자동 생성 로직 필요
- 공공데이터포털 API를 통해 연 1회 동기화

---

#### WeatherInfo (날씨 정보)
**역할**: 사용자에게 제공되는 실시간 기상 정보 (외부 API 응답 매핑)

| 속성 | 데이터 타입 | 제약 조건 | 기본값 | 설명 | 예시 |
|-----|-----------|---------|-------|------|------|
| location | String (100) | NOT NULL | - | 위치 정보 (도시명) | "Seoul" |
| locationKr | String (50) | NULL | - | 한글 위치명 | "서울" |
| temperature | Float | NOT NULL | - | 현재 기온 (섭씨) | 15.5 |
| feelsLike | Float | NULL | - | 체감 온도 (섭씨) | 13.2 |
| condition | String (50) | NOT NULL | - | 날씨 상태 (CLEAR, CLOUDY, RAIN, SNOW) | "CLOUDY" |
| conditionKr | String (20) | NULL | - | 한글 날씨 상태 | "흐림" |
| humidity | Integer | NULL | - | 습도 (%) | 65 |
| windSpeed | Float | NULL | - | 풍속 (m/s) | 3.5 |
| icon | String (10) | NULL | - | 날씨 아이콘 코드 | "04d" |
| timestamp | DateTime | NOT NULL | - | 날씨 정보 조회 시각 | "2025-11-25T14:00:00Z" |

**저장 방식**:
- 데이터베이스에 저장하지 않음 (DTO/응답 객체로만 사용)
- OpenWeatherMap API 실시간 조회 결과를 매핑
- 선택적으로 캐시 레이어 사용 (Redis, 5분 TTL)

**날씨 상태 코드 (condition)**:
- `CLEAR`: 맑음
- `CLOUDY`: 흐림
- `RAIN`: 비
- `SNOW`: 눈
- `THUNDERSTORM`: 뇌우
- `DRIZZLE`: 이슬비
- `MIST`: 안개

**비즈니스 규칙**:
- OpenWeatherMap API Current Weather 엔드포인트 사용
- API 호출 실패 시 에러 코드 SYS-002 반환
- 타임아웃 5초, 최대 3회 재시도
- API 키는 환경 변수로 관리 (보안)

---

#### SessionLog (세션 로그)
**역할**: 사용자 세션 추적 및 보안 감사

| 속성 | 데이터 타입 | 제약 조건 | 기본값 | 설명 | 예시 |
|-----|-----------|---------|-------|------|------|
| sessionId | String (UUID) | PRIMARY KEY, NOT NULL | UUID.v4() | 세션 고유 식별자 | "s1e2s3s4-i5o6-..." |
| userId | String (UUID) | FOREIGN KEY (User), NOT NULL, INDEX | - | 세션 소유자 (User.userId) | "a1b2c3d4-e5f6-..." |
| loginTime | DateTime | NOT NULL | CURRENT_TIMESTAMP | 로그인 시각 | "2025-11-25T09:00:00Z" |
| logoutTime | DateTime | NULL | - | 로그아웃 시각 (NULL=활성) | "2025-11-25T17:00:00Z" |
| expiresAt | DateTime | NOT NULL | loginTime + 30분 | 세션 만료 예정 시각 | "2025-11-25T09:30:00Z" |
| ipAddress | String (45) | NOT NULL | - | 클라이언트 IP (IPv4/IPv6) | "192.168.1.100" |
| userAgent | String (255) | NOT NULL | - | 브라우저 정보 | "Mozilla/5.0..." |
| isActive | Boolean | NOT NULL | true | 세션 활성 상태 | true |

**인덱스**:
- PRIMARY: sessionId
- FOREIGN KEY: userId → User.userId (ON DELETE CASCADE)
- INDEX: (userId, isActive) - 활성 세션 조회 최적화
- INDEX: expiresAt - 만료 세션 정리 배치 작업용

**비즈니스 규칙**:
- 로그인 성공 시 새 SessionLog 레코드 생성
- 세션은 30분 타임아웃 (expiresAt)
- 로그아웃 시 logoutTime 설정, isActive=false
- 만료된 세션(expiresAt < 현재시각)은 자동 비활성화
- 보안 감사를 위해 삭제하지 않고 보관
- 하나의 사용자가 여러 세션 가질 수 있음 (다중 기기 로그인)
- 세션 ID는 쿠키에 저장 (HttpOnly, Secure 플래그)

### 3.2 엔티티 관계
```
User (1) ─────< (N) TodoItem
User (1) ─────< (N) SessionLog

Holiday (독립 엔티티)
WeatherInfo (외부 API 연동)
```

## 4. 핵심 비즈니스 규칙

### 4.1 사용자 인증
- 회원가입 시 필수 정보: 이름, 핸드폰번호, 아이디, 비밀번호
- 아이디는 시스템 내 유일해야 함
- 비밀번호는 SHA-256 해시 알고리즘을 사용하여 암호화되어 저장되어야 함
- 로그인 성공 시 세션 유지 (30분 타임아웃)

### 4.2 할 일 관리
- 사용자는 본인의 할 일만 조회/수정/삭제 가능
- 할 일은 생성 시 만료 기한(dueDate) 설정 필수
- 만료 기한이 지난 할 일은 빨간색 배경(#FFEBEE)으로 표시
- 만료 기한이 오늘인 할 일은 노란색 배경(#FFF9C4)으로 표시
- dueDate가 오늘인 할 일을 메인 화면에 기본으로 표시

### 4.3 완료 축하
- dueDate가 오늘인 할 일을 모두 완료했을 경우 (최소 1개 이상 존재)
- 화면에 폭죽 애니메이션 효과 표시 (3초 동안, 60fps)
- 사용자 만족감 및 동기 부여 제공

### 4.4 날씨 정보
- 메인 화면에 현재 날씨 정보 표시 (OpenWeatherMap API 사용)
- 실시간 시간 및 날짜 정보 제공
- 사용자의 현재 상황 인식 지원

### 4.5 공휴일 관리
- 국경일 등 공식 일정은 시스템에서 자동 표시 (공공데이터포털 API 사용)
- 개인 할 일과 함께 통합 관리
- 사용자는 공휴일 정보를 조회만 가능

## 5. 주요 유스케이스

### 5.1 사용자 관리
| 유스케이스 | 액터 | 설명 |
|-----------|------|------|
| UC-001 회원가입 | 신규 사용자 | 이름, 핸드폰번호, 아이디, 비밀번호를 입력하여 계정 생성 |
| UC-002 로그인 | 등록 사용자 | 아이디와 비밀번호로 인증하여 시스템 접근 |
| UC-003 아이디 찾기 | 등록 사용자 | 이름과 핸드폰번호로 아이디 조회 |
| UC-004 비밀번호 찾기 | 등록 사용자 | 아이디와 핸드폰번호로 비밀번호 재설정 |
| UC-005 로그아웃 | 로그인 사용자 | 세션 종료 및 시스템 로그아웃 |

### 5.2 할 일 관리
| 유스케이스 | 액터 | 설명 |
|-----------|------|------|
| UC-101 할 일 추가 | 로그인 사용자 | + 버튼을 통해 새로운 할 일 생성 (제목, 내용, 만료일) |
| UC-102 할 일 조회 | 로그인 사용자 | 오늘 날짜의 할 일 목록 확인 |
| UC-103 할 일 수정 | 로그인 사용자 | 기존 할 일의 정보 변경 |
| UC-104 할 일 삭제 | 로그인 사용자 | 불필요한 할 일 제거 |
| UC-105 할 일 완료 처리 | 로그인 사용자 | 할 일 완료 상태 변경 |
| UC-106 완료 축하 표시 | 시스템 | 오늘의 모든 할 일 완료 시 폭죽 효과 표시 |

### 5.3 정보 제공
| 유스케이스 | 액터 | 설명 |
|-----------|------|------|
| UC-201 날씨 정보 표시 | 시스템 | 메인 화면에 현재 날씨 표시 |
| UC-202 시간 정보 표시 | 시스템 | 메인 화면에 현재 시간 및 날짜 표시 |
| UC-203 공휴일 표시 | 시스템 | 국경일 등 공식 일정 통합 표시 |

## 6. 데이터 검증 규칙

### 6.1 사용자 정보
| 필드 | 규칙 | 에러 코드 | 에러 메시지 |
|-----|------|----------|-----------|
| username (아이디) | 4~20자, 영문 소문자+숫자, 영문으로 시작, 중복 불가 | VAL-001 | "아이디는 4~20자의 영문 소문자와 숫자만 사용 가능합니다 (영문으로 시작)" |
| password (비밀번호) | 8~50자, 영문+숫자+특수문자 각 1개 이상 포함 | VAL-002 | "비밀번호는 8자 이상, 영문/숫자/특수문자를 포함해야 합니다" |
| name (이름) | 2~20자, 한글 또는 영문 | VAL-003 | "이름은 2~20자의 한글 또는 영문만 입력 가능합니다" |
| phoneNumber (핸드폰) | 010-XXXX-XXXX 형식, 숫자만, 중복 불가 | VAL-004 | "올바른 핸드폰 번호를 입력해주세요 (010-1234-5678)" |

### 6.2 할 일 정보
| 필드 | 규칙 | 에러 코드 | 에러 메시지 |
|-----|------|----------|-----------|
| title (제목) | 1~100자, 필수, 공백 불가 | VAL-101 | "제목을 입력해주세요 (최대 100자)" |
| description (내용) | 0~1000자, 선택 | VAL-102 | "내용은 최대 1000자까지 입력 가능합니다" |
| dueDate (만료 기한) | YYYY-MM-DD 형식, 오늘 이후, 필수 | VAL-103 | "만료 기한은 오늘 이후로 설정해주세요" |

## 7. 기능 요구사항

### 7.1 인증 및 권한
- FR-001: 시스템은 이름, 핸드폰번호, 아이디, 비밀번호를 입력받아 회원가입을 처리해야 함
- FR-002: 시스템은 아이디와 비밀번호로 사용자 로그인을 처리해야 함
- FR-003: 시스템은 아이디 찾기 기능을 제공해야 함
- FR-004: 시스템은 비밀번호 찾기/재설정 기능을 제공해야 함
- FR-005: 로그인한 사용자만 할 일 관리 기능에 접근할 수 있어야 함

### 7.2 할 일 관리
- FR-101: 시스템은 메인 화면에 오늘 날짜의 할 일 목록을 표시해야 함
- FR-102: 시스템은 + 버튼을 통해 할 일 추가 기능을 제공해야 함
- FR-103: 할 일 생성 시 제목, 내용, 만료 기한을 입력받아야 함
- FR-104: 시스템은 할 일의 수정 및 삭제 기능을 제공해야 함
- FR-105: 시스템은 할 일의 완료/미완료 상태를 토글할 수 있어야 함
- FR-106: 시스템은 만료 기한이 지난 할 일을 빨간색 배경(#FFEBEE), 오늘인 할 일을 노란색 배경(#FFF9C4)으로 구분 표시해야 함
- FR-107: 사용자는 본인이 생성한 할 일만 조회/수정/삭제할 수 있어야 함 (권한 검증은 API 요청 시 수행)

### 7.3 사용자 경험
- FR-201: 메인 화면에 현재 날짜와 시간을 실시간으로 표시해야 함
- FR-202: 메인 화면에 현재 날씨 정보를 표시해야 함 (OpenWeatherMap API 사용)
- FR-203: 오늘 날짜의 모든 할 일을 완료했을 때 폭죽 애니메이션을 3초 동안 표시해야 함
- FR-204: 국경일 등 공휴일 정보를 할 일 목록과 함께 표시해야 함 (공공데이터포털 API 사용)

### 7.4 비기능 요구사항
- NFR-001: 사용자 정보(특히 비밀번호)는 SHA-256 해시 알고리즘을 사용하여 암호화되어 저장되어야 함
- NFR-002: 사용자 세션은 30분 타임아웃으로 관리되어야 함 (세션 쿠키 HttpOnly, Secure 플래그 사용)
- NFR-003: 날씨 정보는 외부 API를 통해 실시간으로 조회되어야 함 (타임아웃 5초, 3회 재시도)
- NFR-004: 폭죽 애니메이션은 3초 동안, 60fps로 표현되어야 하며 CPU 사용률 10% 미만이어야 함
- NFR-005: 메인 화면 로딩 시간은 2초 이내여야 함
- NFR-006: 95% 요청은 500ms 이내에 응답해야 함

## 8. 에러 코드 체계

### 8.1 인증 에러 (AUTH-xxx)
| 에러 코드 | 설명 | HTTP 상태 | 사용자 메시지 |
|----------|------|-----------|-------------|
| AUTH-001 | 아이디/비밀번호 불일치 | 401 | "로그인 정보를 확인해주세요" |
| AUTH-002 | 인증 토큰 만료 | 401 | "세션이 만료되었습니다. 다시 로그인해주세요" |
| AUTH-003 | 권한 없음 | 403 | "접근 권한이 없습니다" |
| AUTH-004 | 중복 아이디 | 409 | "이미 사용 중인 아이디입니다" |
| AUTH-005 | 중복 핸드폰번호 | 409 | "이미 등록된 핸드폰번호입니다" |
| AUTH-006 | 사용자 미존재 | 404 | "존재하지 않는 사용자입니다" |

### 8.2 할 일 에러 (TODO-xxx)
| 에러 코드 | 설명 | HTTP 상태 | 사용자 메시지 |
|----------|------|-----------|-------------|
| TODO-001 | 할 일 미존재 | 404 | "할 일을 찾을 수 없습니다" |
| TODO-002 | 권한 없음 | 403 | "본인의 할 일만 수정할 수 있습니다" |
| TODO-003 | 만료 기한 과거 | 400 | "만료 기한은 오늘 이후로 설정해주세요" |

### 8.3 검증 에러 (VAL-xxx)
위 6. 데이터 검증 규칙 참조

### 8.4 시스템 에러 (SYS-xxx)
| 에러 코드 | 설명 | HTTP 상태 | 사용자 메시지 |
|----------|------|-----------|-------------|
| SYS-001 | 데이터베이스 오류 | 500 | "일시적인 오류가 발생했습니다. 잠시 후 다시 시도해주세요" |
| SYS-002 | 외부 API 오류 (날씨) | 503 | "날씨 정보를 가져올 수 없습니다" |
| SYS-003 | 외부 API 오류 (공휴일) | 503 | "공휴일 정보를 가져올 수 없습니다" |

## 9. 인수 테스트 시나리오

### AC-001: 회원가입 성공
**Given**: 신규 사용자가 회원가입 페이지에 접속함
**When**:
  - 이름: "홍길동"
  - 핸드폰번호: "010-1234-5678"
  - 아이디: "hong123"
  - 비밀번호: "Test1234!@"
  - 위 정보를 입력하고 "회원가입" 버튼 클릭
**Then**:
  - 회원가입 성공 메시지 표시
  - 로그인 페이지로 자동 이동
  - 데이터베이스에 사용자 정보 저장됨 (비밀번호는 SHA-256 해시)

### AC-002: 로그인 성공 및 메인 화면 표시
**Given**: 사용자 "hong123"이 이미 회원가입된 상태
**When**:
  - 아이디 "hong123", 비밀번호 "Test1234!@" 입력 후 로그인
**Then**:
  - 로그인 성공 메시지 표시
  - 메인 화면으로 이동
  - 상단에 현재 날짜, 시간, 날씨 정보 표시
  - 오늘 날짜의 할 일 목록 표시
  - 세션 생성 (30분 타임아웃)

### AC-003: 할 일 추가
**Given**: 사용자 "hong123"이 로그인한 상태
**When**:
  - 메인 화면에서 + 버튼 클릭
  - 제목: "프로젝트 보고서 작성"
  - 내용: "월간 프로젝트 진행 현황 보고서 작성"
  - 만료 기한: "2025-11-30"
  - 저장 버튼 클릭
**Then**:
  - 할 일이 목록에 추가됨
  - 성공 메시지 표시
  - 데이터베이스에 저장됨 (userId=hong123)

### AC-004: 폭죽 애니메이션 표시
**Given**:
  - 사용자 "hong123"이 로그인한 상태
  - 오늘 날짜(2025-11-25)의 할 일이 3개 존재 (모두 미완료)
**When**:
  - 첫 번째 할 일 완료 처리 → 폭죽 미표시
  - 두 번째 할 일 완료 처리 → 폭죽 미표시
  - 세 번째 할 일 완료 처리
**Then**:
  - 폭죽 애니메이션 자동 실행 (3초 동안, 60fps)
  - 축하 메시지 표시
  - 애니메이션 종료 후 정상 화면 복귀

### AC-005: 만료 기한 색상 표시
**Given**:
  - 오늘 날짜: 2025-11-25
  - 사용자에게 다음 할 일이 존재:
    - 할 일 A: dueDate=2025-11-24 (1일 초과)
    - 할 일 B: dueDate=2025-11-25 (오늘)
    - 할 일 C: dueDate=2025-11-26 (1일 남음)
**When**: 메인 화면에 접속
**Then**:
  - 할 일 A: 빨간색 배경 (#FFEBEE), "만료됨" 라벨
  - 할 일 B: 노란색 배경 (#FFF9C4), "오늘까지" 라벨
  - 할 일 C: 기본 배경, 라벨 없음

### AC-006: 권한 검증 - 다른 사용자 할 일 수정 차단
**Given**:
  - 사용자 A의 할 일 ID: "todo-123"
  - 사용자 B가 로그인한 상태
**When**: 사용자 B가 "todo-123" 수정 시도
**Then**:
  - HTTP 403 Forbidden 응답
  - 에러 코드: TODO-002
  - 에러 메시지: "본인의 할 일만 수정할 수 있습니다"

### AC-007: 데이터 검증 - 잘못된 비밀번호 형식
**Given**: 신규 사용자가 회원가입 페이지에 접속
**When**: 비밀번호 "1234" 입력 (8자 미만)
**Then**:
  - HTTP 400 Bad Request 응답
  - 에러 코드: VAL-002
  - 에러 메시지: "비밀번호는 8자 이상, 영문/숫자/특수문자를 포함해야 합니다"

### AC-008: 외부 API 장애 처리 - 날씨 정보
**Given**: 날씨 API가 일시적으로 응답하지 않음
**When**: 사용자가 메인 화면에 접속
**Then**:
  - 메인 화면은 정상 로딩됨
  - 날씨 정보 영역에 "날씨 정보를 가져올 수 없습니다" 메시지 표시
  - 나머지 기능(할 일 목록 등)은 정상 동작

## 10. 요구사항 추적 매트릭스

| 비즈니스 규칙 | 유스케이스 | 기능 요구사항 | 비기능 요구사항 | 테스트 시나리오 | 에러 코드 |
|------------|-----------|-------------|---------------|--------------|---------|
| 4.1 사용자 인증 | UC-001~005 | FR-001~005 | NFR-001, NFR-002 | AC-001, AC-002, AC-007 | AUTH-001~006, VAL-001~004 |
| 4.2 할 일 관리 | UC-101~105 | FR-101~107 | - | AC-003, AC-005, AC-006 | TODO-001~003, VAL-101~103 |
| 4.3 완료 축하 | UC-106 | FR-203 | NFR-004 | AC-004 | - |
| 4.4 날씨 정보 | UC-201 | FR-202 | NFR-003 | AC-008 | SYS-002 |
| 4.5 공휴일 관리 | UC-203 | FR-204 | - | - | SYS-003 |

## 11. 성공 지표

- 사용자 회원가입 완료율: 95% 이상
- 로그인 성공률: 98% 이상
- 할 일 완료 시 폭죽 효과 만족도: 4.0/5.0 이상
- 메인 화면 로딩 시간: 2초 이내 (NFR-005)
- 95% 요청 응답 시간: 500ms 이내 (NFR-006)
- 사용자 할 일 생성 및 완료율: 주간 평균 70% 이상

## 12. 제약사항

- 웹 브라우저 환경에서 동작해야 함 (Chrome, Firefox, Safari, Edge 최신 버전)
- 날씨 API 의존성 존재 (OpenWeatherMap 외부 서비스 장애 대응 필요)
- 공휴일 API 의존성 존재 (공공데이터포털 외부 서비스 장애 대응 필요)
- 공휴일 정보는 연 1회 이상 업데이트 필요
- 사용자 데이터는 개인정보보호법 준수 필요
- 세션 기반 인증으로 인한 다중 기기 동시 접속 제한

## 13. 향후 확장 가능성

| 기능 | 우선순위 | 영향도 | 복잡도 | 의존성 |
|-----|---------|--------|--------|-------|
| 할 일 카테고리 분류 | P1 (6개월 이내) | TodoItem 엔티티 변경 | 중간 | FR-101~107 수정 필요 |
| 할 일 우선순위 설정 | P1 (6개월 이내) | TodoItem 엔티티 변경, UI 변경 | 낮음 | FR-106 확장 |
| 반복 일정 기능 | P2 (1년 이내) | 새로운 RecurringTodo 엔티티 추가 | 높음 | 스케줄러 시스템 필요 |
| 알림 기능 (이메일, 푸시) | P2 (1년 이내) | 새로운 Notification 엔티티, 외부 서비스 연동 | 높음 | 이메일 서비스, 푸시 서비스 |
| 팀/그룹 공유 할 일 | P3 (2년+) | Team, TeamMember 엔티티 추가, 권한 체계 재설계 | 매우 높음 | 전체 아키텍처 영향 |
| 모바일 앱 확장 | P3 (2년+) | API 표준화, 모바일 최적화 | 매우 높음 | REST API 완전 분리 필요 |

### 안정 영역 (변경 최소화)
- User 엔티티 핵심 속성 (userId, username, name)
- 기본 인증 프로세스 (회원가입, 로그인)
- SHA-256 해시 알고리즘

### 변동 영역 (유연한 설계 필요)
- 날씨 API 제공자 (OpenWeatherMap → 다른 서비스로 교체 가능성)
- 폭죽 애니메이션 효과 (다양한 보상 효과로 확장 가능성)
- 공휴일 데이터 소스 (공공데이터포털 → 자체 DB로 전환 가능성)
- UI 테마 및 디자인
