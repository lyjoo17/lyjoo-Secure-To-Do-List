{
  "openapi": "3.0.0",
  "info": {
    "title": "lyjoo Secure To-Do List API",
    "description": "## lyjoo Secure To-Do List API 문서\n\n사용자 인증 기능을 갖춘 안전한 할 일 관리 애플리케이션의 RESTful API입니다.\n\n### 주요 기능\n- JWT 기반 사용자 인증 (Bearer Token)\n- 할 일 CRUD 및 휴지통 기능\n- 국경일 정보 조회\n- 사용자 프로필 관리\n\n### 보안\n- **인증**: JWT Bearer Token\n- **보안 헤더**: Helmet 미들웨어 (XSS, CSP, HSTS 등)\n- **비밀번호**: bcryptjs 해싱\n- **Rate Limiting**:\n  - 일반 API: 1분당 100회\n  - 인증 API: 1분당 10회\n\n### CORS\n- 개발 환경: `http://localhost:5173`\n- 프로덕션: 환경 변수로 설정\n- Credentials 지원: `true`\n\n### 환경 설정\n필수 환경 변수:\n- `DATABASE_URL`: PostgreSQL 연결 문자열\n- `JWT_SECRET`: JWT 서명 키\n- `CORS_ORIGIN`: 허용할 Origin\n- `PORT`: 서버 포트 (기본: 3000)\n\n### 문서 참고\n- 프론트엔드 통합 가이드: `doc/10-frontend-integration-guide.md`\n- 데이터베이스 스키마: `backend/prisma/schema.prisma`",
    "version": "1.0.0",
    "contact": {
      "name": "API Support"
    }
  },
  "servers": [
    {
      "url": "http://localhost:3000/api",
      "description": "로컬 개발 서버"
    },
    {
      "url": "https://your-domain.vercel.app/api",
      "description": "프로덕션 서버"
    }
  ],
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "description": "JWT 토큰을 Authorization 헤더에 'Bearer {token}' 형식으로 전달합니다."
      }
    },
    "schemas": {
      "User": {
        "type": "object",
        "properties": {
          "userId": {
            "type": "string",
            "format": "uuid",
            "description": "사용자 고유 식별자",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "사용자 이메일 주소",
            "example": "user@example.com"
          },
          "username": {
            "type": "string",
            "description": "사용자 이름",
            "example": "홍길동"
          },
          "role": {
            "type": "string",
            "enum": ["USER", "ADMIN"],
            "default": "USER",
            "description": "사용자 역할"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "계정 생성 일시"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time",
            "description": "계정 수정 일시"
          }
        }
      },
      "Todo": {
        "type": "object",
        "properties": {
          "todoId": {
            "type": "string",
            "format": "uuid",
            "description": "할 일 고유 식별자",
            "example": "660e8400-e29b-41d4-a716-446655440001"
          },
          "userId": {
            "type": "string",
            "format": "uuid",
            "description": "할 일을 소유한 사용자 ID"
          },
          "title": {
            "type": "string",
            "description": "할 일 제목",
            "example": "프로젝트 보고서 작성"
          },
          "content": {
            "type": "string",
            "nullable": true,
            "description": "할 일 상세 내용",
            "example": "Q1 실적 보고서 작성 및 검토"
          },
          "startDate": {
            "type": "string",
            "format": "date-time",
            "nullable": true,
            "description": "할 일 시작 날짜",
            "example": "2025-01-01T00:00:00.000Z"
          },
          "dueDate": {
            "type": "string",
            "format": "date-time",
            "nullable": true,
            "description": "할 일 마감 날짜",
            "example": "2025-01-10T00:00:00.000Z"
          },
          "isCompleted": {
            "type": "boolean",
            "default": false,
            "description": "완료 여부"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "생성 일시"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time",
            "description": "수정 일시"
          },
          "deletedAt": {
            "type": "string",
            "format": "date-time",
            "nullable": true,
            "description": "소프트 삭제 일시 (휴지통으로 이동)"
          }
        }
      },
      "Holiday": {
        "type": "object",
        "properties": {
          "holidayId": {
            "type": "string",
            "format": "uuid",
            "description": "국경일 고유 식별자"
          },
          "title": {
            "type": "string",
            "description": "국경일 명칭",
            "example": "신정"
          },
          "date": {
            "type": "string",
            "format": "date-time",
            "description": "국경일 날짜",
            "example": "2025-01-01T00:00:00.000Z"
          },
          "description": {
            "type": "string",
            "nullable": true,
            "description": "국경일 설명",
            "example": "새해 첫날"
          },
          "isRecurring": {
            "type": "boolean",
            "default": true,
            "description": "매년 반복 여부"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "Error": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "default": false
          },
          "message": {
            "type": "string",
            "description": "에러 메시지",
            "example": "Invalid credentials"
          },
          "errors": {
            "type": "array",
            "description": "검증 에러 배열 (선택적)",
            "items": {
              "type": "object",
              "properties": {
                "field": {
                  "type": "string",
                  "example": "email"
                },
                "message": {
                  "type": "string",
                  "example": "Please provide a valid email"
                }
              }
            }
          }
        }
      },
      "AuthResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "default": true
          },
          "data": {
            "type": "object",
            "properties": {
              "accessToken": {
                "type": "string",
                "description": "JWT 액세스 토큰 (유효기간: 1일)",
                "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
              },
              "refreshToken": {
                "type": "string",
                "description": "JWT 리프레시 토큰 (현재 미사용)",
                "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
              },
              "user": {
                "$ref": "#/components/schemas/User"
              }
            }
          }
        }
      }
    }
  },
  "tags": [
    {
      "name": "Auth",
      "description": "사용자 인증 관련 API (회원가입, 로그인, 로그아웃)"
    },
    {
      "name": "Todos",
      "description": "할 일 관리 API (CRUD, 복원, 영구 삭제)"
    },
    {
      "name": "Holidays",
      "description": "국경일 정보 API"
    },
    {
      "name": "Users",
      "description": "사용자 프로필 관리 API"
    }
  ],
  "paths": {
    "/auth/register": {
      "post": {
        "tags": ["Auth"],
        "summary": "회원가입",
        "description": "새로운 사용자를 등록합니다. 이메일은 중복될 수 없으며, 비밀번호는 bcrypt로 해싱되어 저장됩니다.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["email", "password", "username"],
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email",
                    "description": "사용자 이메일 (중복 불가)",
                    "example": "user@example.com"
                  },
                  "password": {
                    "type": "string",
                    "minLength": 6,
                    "description": "비밀번호 (최소 6자)",
                    "example": "password123"
                  },
                  "username": {
                    "type": "string",
                    "minLength": 2,
                    "maxLength": 50,
                    "description": "사용자 이름 (2~50자)",
                    "example": "홍길동"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "회원가입 성공",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/User"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "검증 실패",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "success": false,
                  "message": "Validation failed",
                  "errors": [
                    {
                      "field": "email",
                      "message": "Please provide a valid email"
                    }
                  ]
                }
              }
            }
          },
          "409": {
            "description": "이메일 중복",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "success": false,
                  "message": "Email already exists"
                }
              }
            }
          },
          "429": {
            "description": "요청 횟수 제한 초과 (1분당 10회)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "success": false,
                  "message": "Too many authentication attempts, please try again later."
                }
              }
            }
          }
        }
      }
    },
    "/auth/login": {
      "post": {
        "tags": ["Auth"],
        "summary": "로그인",
        "description": "이메일과 비밀번호로 로그인하여 JWT 토큰을 발급받습니다.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["email", "password"],
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email",
                    "example": "user@example.com"
                  },
                  "password": {
                    "type": "string",
                    "example": "password123"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "로그인 성공",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthResponse"
                }
              }
            }
          },
          "401": {
            "description": "인증 실패 (잘못된 이메일 또는 비밀번호)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "success": false,
                  "message": "Invalid credentials"
                }
              }
            }
          },
          "429": {
            "description": "요청 횟수 제한 초과 (1분당 10회)"
          }
        }
      }
    },
    "/auth/logout": {
      "post": {
        "tags": ["Auth"],
        "summary": "로그아웃",
        "description": "현재 사용자를 로그아웃합니다. (클라이언트에서 토큰 삭제 권장)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "로그아웃 성공",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Logged out successfully"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "인증 실패 (토큰 없음 또는 만료)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "success": false,
                  "message": "Invalid or expired token"
                }
              }
            }
          }
        }
      }
    },
    "/todos": {
      "get": {
        "tags": ["Todos"],
        "summary": "할 일 목록 조회",
        "description": "사용자의 할 일 목록을 조회합니다. 필터링, 검색, 정렬 기능을 지원합니다.\n\n**휴지통 조회**: `status=deleted` 쿼리 파라미터를 사용하여 삭제된 할 일 목록을 조회할 수 있습니다.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "status",
            "in": "query",
            "description": "상태별 필터링 (deleted=휴지통)",
            "schema": {
              "type": "string",
              "enum": ["active", "completed", "deleted"]
            },
            "example": "active"
          },
          {
            "name": "search",
            "in": "query",
            "description": "제목 또는 내용 검색",
            "schema": {
              "type": "string"
            },
            "example": "보고서"
          },
          {
            "name": "sortBy",
            "in": "query",
            "description": "정렬 기준",
            "schema": {
              "type": "string",
              "enum": ["dueDate", "createdAt"],
              "default": "createdAt"
            }
          },
          {
            "name": "order",
            "in": "query",
            "description": "정렬 순서",
            "schema": {
              "type": "string",
              "enum": ["asc", "desc"],
              "default": "desc"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "할 일 목록 조회 성공",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Todo"
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "인증 실패"
          }
        }
      },
      "post": {
        "tags": ["Todos"],
        "summary": "할 일 생성",
        "description": "새로운 할 일을 생성합니다.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["title"],
                "properties": {
                  "title": {
                    "type": "string",
                    "maxLength": 255,
                    "description": "할 일 제목 (필수, 최대 255자)",
                    "example": "프로젝트 보고서 작성"
                  },
                  "content": {
                    "type": "string",
                    "description": "할 일 상세 내용 (선택)",
                    "example": "Q1 실적 보고서 작성"
                  },
                  "startDate": {
                    "type": "string",
                    "format": "date",
                    "description": "시작 날짜 (ISO 8601 형식)",
                    "example": "2025-01-01"
                  },
                  "dueDate": {
                    "type": "string",
                    "format": "date",
                    "description": "마감 날짜 (ISO 8601 형식)",
                    "example": "2025-01-10"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "할 일 생성 성공",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Todo created successfully"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Todo"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "검증 실패 (필수 필드 누락 또는 잘못된 날짜 형식)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "인증 실패"
          }
        }
      }
    },
    "/todos/{id}": {
      "get": {
        "tags": ["Todos"],
        "summary": "할 일 상세 조회",
        "description": "특정 할 일의 상세 정보를 조회합니다. 본인의 할 일만 조회 가능합니다.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "할 일 ID (UUID)",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "할 일 조회 성공",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/Todo"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "인증 실패"
          },
          "403": {
            "description": "권한 없음 (다른 사용자의 할 일)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "success": false,
                  "message": "You do not have permission to access this todo"
                }
              }
            }
          },
          "404": {
            "description": "할 일을 찾을 수 없음",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "success": false,
                  "message": "Todo not found"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": ["Todos"],
        "summary": "할 일 수정",
        "description": "할 일의 정보를 수정합니다. `isCompleted` 필드를 통해 완료 상태를 변경할 수 있습니다.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "title": {
                    "type": "string",
                    "maxLength": 255,
                    "example": "수정된 제목"
                  },
                  "content": {
                    "type": "string",
                    "example": "수정된 내용"
                  },
                  "startDate": {
                    "type": "string",
                    "format": "date",
                    "example": "2025-01-02"
                  },
                  "dueDate": {
                    "type": "string",
                    "format": "date",
                    "example": "2025-01-15"
                  },
                  "isCompleted": {
                    "type": "boolean",
                    "description": "완료 상태로 변경",
                    "example": true
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "할 일 수정 성공",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Todo updated successfully"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Todo"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "검증 실패"
          },
          "401": {
            "description": "인증 실패"
          },
          "403": {
            "description": "권한 없음"
          },
          "404": {
            "description": "할 일을 찾을 수 없음"
          }
        }
      },
      "delete": {
        "tags": ["Todos"],
        "summary": "할 일 삭제 (휴지통으로 이동)",
        "description": "할 일을 소프트 삭제합니다. `deletedAt` 타임스탬프가 기록되며, 복원 가능합니다.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "휴지통으로 이동 성공",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Todo moved to trash"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Todo"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "인증 실패"
          },
          "403": {
            "description": "권한 없음"
          },
          "404": {
            "description": "할 일을 찾을 수 없음"
          }
        }
      }
    },
    "/todos/{id}/restore": {
      "patch": {
        "tags": ["Todos"],
        "summary": "할 일 복원",
        "description": "휴지통(소프트 삭제)에서 할 일을 복원합니다.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "복원 성공",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Todo restored successfully"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Todo"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "인증 실패"
          },
          "403": {
            "description": "권한 없음"
          },
          "404": {
            "description": "할 일을 찾을 수 없음"
          }
        }
      }
    },
    "/todos/{id}/permanent": {
      "delete": {
        "tags": ["Todos"],
        "summary": "할 일 영구 삭제",
        "description": "할 일을 데이터베이스에서 영구적으로 삭제합니다. **복구 불가능**하므로 주의가 필요합니다.\n\n**주의**: 활성 상태(`deletedAt`이 null)인 할 일은 영구 삭제할 수 없습니다. 먼저 휴지통으로 이동 후 영구 삭제해야 합니다.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "영구 삭제 성공",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Todo permanently deleted"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "잘못된 요청 (활성 상태의 할 일은 영구 삭제 불가)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "success": false,
                  "message": "Cannot permanently delete active todo. Move to trash first."
                }
              }
            }
          },
          "401": {
            "description": "인증 실패"
          },
          "403": {
            "description": "권한 없음"
          },
          "404": {
            "description": "할 일을 찾을 수 없음"
          }
        }
      }
    },
    "/holidays": {
      "get": {
        "tags": ["Holidays"],
        "summary": "국경일 목록 조회",
        "description": "국경일 목록을 조회합니다. 연도 및 월별 필터링이 가능합니다.\n\n**인증 필요**: Bearer Token 필요",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "year",
            "in": "query",
            "description": "연도 필터 (예: 2025)",
            "schema": {
              "type": "integer",
              "example": 2025
            }
          },
          {
            "name": "month",
            "in": "query",
            "description": "월 필터 (1~12)",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 12,
              "example": 1
            }
          }
        ],
        "responses": {
          "200": {
            "description": "국경일 목록 조회 성공",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Holiday"
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "인증 실패"
          }
        }
      }
    },
    "/holidays/sync": {
      "post": {
        "tags": ["Holidays"],
        "summary": "국경일 동기화 (관리자 전용)",
        "description": "외부 API에서 국경일 데이터를 가져와 동기화합니다.\n\n**권한**: 관리자(ADMIN) 역할 필요",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "동기화 성공",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Holidays synchronized successfully"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "count": {
                          "type": "integer",
                          "description": "동기화된 국경일 수",
                          "example": 15
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "인증 실패"
          },
          "403": {
            "description": "권한 없음 (관리자 역할 필요)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "success": false,
                  "message": "Admin access required"
                }
              }
            }
          }
        }
      }
    },
    "/users/me": {
      "get": {
        "tags": ["Users"],
        "summary": "내 프로필 조회",
        "description": "현재 로그인한 사용자의 프로필 정보를 조회합니다.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "프로필 조회 성공",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/User"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "인증 실패"
          }
        }
      },
      "patch": {
        "tags": ["Users"],
        "summary": "내 프로필 수정",
        "description": "현재 로그인한 사용자의 프로필을 수정합니다. 사용자 이름 및 비밀번호를 변경할 수 있습니다.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "username": {
                    "type": "string",
                    "minLength": 2,
                    "maxLength": 50,
                    "description": "새로운 사용자 이름",
                    "example": "새로운이름"
                  },
                  "password": {
                    "type": "string",
                    "minLength": 6,
                    "description": "새로운 비밀번호 (최소 6자)",
                    "example": "newpassword123"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "프로필 수정 성공",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "userId": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "username": {
                          "type": "string",
                          "example": "새로운이름"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "검증 실패"
          },
          "401": {
            "description": "인증 실패"
          }
        }
      }
    }
  }
}
